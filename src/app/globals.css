/* ---------- Tailwind v3 entrypoints ---------- */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------------- Base ---------------- */
html, body { background:#fff; color:#0f172a; -webkit-text-size-adjust:100%; }
:root { --background:#ffffff; --foreground:#171717; }

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* -------------- COMPONENT LAYER -------------- */
@layer components {
  .text-dual { @apply text-slate-900 dark:text-slate-100; }

  .container { @apply max-w-7xl mx-auto px-6; }

  .underlined { @apply underline decoration-2 underline-offset-4 md:underline-offset-6 decoration-teal-600; }

  /* lift */
  .lift { @apply transition-transform shadow-sm; }
  .lift:hover { @apply -translate-y-0.5 shadow-md; }

  /* Surfaces / Cards (LIGHT defaults) */
  .surface        { @apply bg-slate-50; }
  .section-alt    { @apply rounded-lg bg-slate-100/80 p-4 border; }
  .surface-strong { @apply bg-teal-100; }
  .card { @apply border rounded-lg p-4 bg-slate-50/90 backdrop-blur transition-all; }

  /* Header */
  .site-header { @apply z-50 border-b; }
  .site-header__bg {
    @apply absolute inset-0 bg-cover bg-center pointer-events-none brightness-75;
    background-image: url('/austinskyline1.jpg');
  }
  .site-header__overlay { @apply absolute inset-0 bg-black/60 sm:bg-black/50 pointer-events-none; }
  .site-header__row { @apply h-28 flex items-center justify-between; }

  .site-header::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: 0;
    height: 4px;
    background-color: #0d9488; /* teal-600 */
  }

  .main-nav { @apply flex items-center gap-10; }
  .main-nav > a { @apply text-lg font-semibold tracking-wide text-white hover:text-teal-300 transition-colors; }

  .btn-cta {
    @apply inline-block rounded-lg bg-teal-600 px-4 py-2 font-semibold text-white shadow
           hover:bg-teal-700 hover:shadow-md focus:outline-none focus-visible:ring-2
           focus-visible:ring-teal-500 transition-colors;
  }

  /* Footer */
  .site-footer { @apply border-t bg-neutral-50; }
  .site-footer__inner { @apply max-w-6xl mx-auto px-4 py-6 text-sm text-gray-600; }

  /* ===== Mobile text color safeguards ===== */
  @media (max-width: 640px) {
    footer { padding-bottom: 4.5rem; }
    :is(.bg-slate-50, .bg-slate-100, .bg-slate-100\/70)
      :where(h1,h2,h3,h4,h5,h6,strong,a,button,label) { color:#0f172a !important; }
    :is(.bg-slate-50, .bg-slate-100, .bg-slate-100\/70)
      :where(p,li,small,span,em,blockquote) { color:#334155 !important; }
    .h3-fixes { color:#0f172a !important; }
  }

  /* LIGHT testimonial fix (only in light mode on mobile) */
  @media (prefers-color-scheme: light) and (max-width: 640px) {
    .testimonial-block,
    .testimonial-block blockquote,
    .testimonial-block span { color:#0f172a !important; }
  }
}

/* =========================================================
   DARK MODE
   ========================================================= */
@media (prefers-color-scheme: dark) {
  html, body { background:#0f172a; color:#f1f5f9; }

  .site-header__overlay { background-color: rgba(0,0,0,.55); }

  /* Hero & cards readability */
  .hero-section :where(h1,h2,h3,h4,h5,h6,p,span,strong,a,button) { color:#ffffff !important; }

  .card, .benefit-card {
    background-color: rgba(30,41,59,0.9) !important; /* slate-800/90 */
    border-color: rgba(71,85,105,0.5) !important;     /* slate-600/50 */
    color:#f1f5f9 !important;
  }

  h1,h2,h3,h4,h5,h6,strong { color:#ffffff; }
  p,li,small,span,em,blockquote { color:#e2e8f0; }

  /* keep white on teal readable (teal text on white pill) */
  .bg-teal-600 .bg-white,
  .bg-teal-700 .bg-white {
    color:#0f766e !important;
  }

  /* Make “What We Do” readable & flush (no white background) */
  .what-we-do-section { background:transparent !important; }
  .what-we-do-section .card {
    background: rgba(30,41,59,0.9) !important;
    border-color: rgba(71,85,105,0.5) !important;
  }
  .what-we-do-section .card :is(h1,h2,h3,h4,h5,h6,strong,a) { color:#ffffff !important; }
  .what-we-do-section .card :is(p,li,small,span,em,blockquote,[class*="text-gray-"],[class*="text-slate-"]) { color:#e6edf5 !important; }
}

/* Dark + Mobile content text safety */
@media (prefers-color-scheme: dark) and (max-width: 640px) {
  main, section, article, .container,
  .card, .benefit-card, .section-alt, .rounded-lg.border, .rounded-xl.border { color:#ffffff !important; }

  main :where(h1,h2,h3,h4,h5,h6,strong,a,button,label,p,li,small,span,em,blockquote) {
    color:#ffffff !important;
  }

  /* sticky CTA button text = white */
  .sticky-cta a, .sticky-cta button { color:#ffffff !important; }
}

/* Mobile Drawer: text black, CTA white */
@media (max-width: 640px) {
  .mobile-drawer, .mobile-drawer * { color:#0f172a !important; }
  .mobile-drawer a, .mobile-drawer .drawer-link { color:#0f172a !important; }
  .mobile-drawer .btn-cta, .mobile-drawer .btn-cta * { color:#ffffff !important; }
}

/* === DARK + MOBILE HEADER: keep header text black but hamburger icon WHITE === */
@media (prefers-color-scheme: dark) and (max-width: 640px) {
  /* Header text/icons default black (keeps nav labels black on your hero) */
  .site-header, .site-header * { color:#0f172a !important; }

  /* CTA stays white on teal */
  .site-header .btn-cta, .site-header .btn-cta * { color:#ffffff !important; }

  /* Force the hamburger icon (and any menu button icon) to white */
  .site-header .hamburger,
  .site-header .hamburger *,
  .site-header button[aria-label*="menu"],
  .site-header button[aria-label*="Menu"],
  .site-header button[aria-expanded],
  .site-header button[aria-haspopup="menu"],
  .site-header button svg,
  .site-header .hamburger svg {
    color:#ffffff !important;
    stroke: currentColor !important;
    fill: currentColor !important;
  }
}
